# 8051 笔记

> 都 2022 年了，~~我也不知道为什么还要学习80年代的单片机~~，悲 

## 什么是 8051
Intel MCS-51 ，也就是通常说的 8051（八零五一，eight-oh-five-one），是 Intel 在上世纪80年代开发的单芯片微控制器系列，
是哈佛结构（程序和数据存储器分离），复杂指令集的 8 位微控制器。
Intel 已于 2007年停产 MCS-51 系列产品，目前市面上的 51 单片机主要来自其他厂商的增强型8051产品，是8051的衍生版本，Intel将 8051 单片机内核授权给很多半导体产生，使其可以生产 8051 的衍生产品，目前国内使用最多的衍生芯片应该是 STC 的增强型 8051

## 衍生芯片

## 8051 的特点
+ 可以做到极致的小体积：比如 DFN-8
+ 价格便宜
+ 部分桥接芯片之类的东西可能会塞个 8051 核进去

## 8051 的缺点
GitHub 上一个[让 8051 模拟 RISC32IM 指令集的项目](https://github.com/cyrozap/rv51)有提及:  

> 
> + 8 位寄存器，ALU 和数据总线
> + 16 位指针（但有一些实现支持分页地址访问）
> + 仅 256 字节的内置 “高速” 存储器，所有其他的存储器都是通过慢得多的外部存储器总线访问的（由于访问延迟和从其读取所需的指令数量）
> + 许多指令要求首先将数据移入累加器（Accumulator, A/ACC）寄存器，以便对其进行操作。
> + 多个存储器区域，有直接和间接访问的内部存储器、特殊功能寄存器（SFR）、位映射寄存器、寄存器组、外部存储器和只读代码存储器。
> + 内部堆栈空间与内部数据存储器共享，后者也与寄存器存储器共享。
>
>由于这些和其他的一些限制，很难为这样的设备创建 C 编译器目标，像 SDCC 这样已经被移植的编译器，缺少了现代编译器，比如 GCC 和 LLVM 所拥有的许多有用的特性，如先进的、可配置的警告，强大的死代码消除和其他优化技术，等等。此外，如果没有LLVM或专门的编译器项目的支持，基于LLVM的语言，如Rust，就不能为设备进行编译。解决这些问题的方法之一是进行困难的软件开发工作，将8051作为目标添加到 GCC 和 LLVM中。另一种方法是在8051上模拟一个简单的、没有专利的CPU架构，它已经有很好的编译器支持--即RISC-V。

## C51
C51 ~~当然不是 1951 年的C标准，Dennis Ritchie 要到 1972 年才能发明 C 语言~~ 是 Keil 公司为了便于对 8051 的开发（8051 与 x86 ARM 等等的编程模型区别很大）对 ANSI C 的扩展。

## 开发工具：  
### 烧录工具
[STC-gal](https://github.com/grigorig/stcgal)

### 编译器
[SDCC](http://sdcc.sourceforge.net/)

### 模拟器
[VM8051](https://github.com/lukbettale/VM8051)

### 编辑器
Visual Studio Code

> 当然，也可以直接选择 Keil μVersion
