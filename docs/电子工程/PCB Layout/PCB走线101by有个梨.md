# PCB走线101。

1 如果是双面板，首先两面铺铜，如果是四层板，中间两层先铺上铜，如果是六层板，要三层平面，分别是2（地）/4（电源）/5（地），这个对走高速线极有帮助，而且背面的去耦电容不用垂直距离即可接地，对象CPU/内存之类的高速器件的电源极好。6层以上不说了，你能做6层通孔以上已经水平比我不知道高到哪里去了。

2 布线永远先走电源拓扑，射频地和音频地；如果是线性拓扑，是电源到数字电路到模拟/射频电路，如果是星形拓扑，数字、模拟、射频都直接连接到电源地。把有功率的数字器件摆到一端，让音频射频在数字和电源中间是布板的大忌，因为那个地就一直是很有噪音的，你搞去耦滤波也难消除对模拟器件的影响。

3 开关电压芯片的输入一定要有一个0.1uF尽可能靠近芯片的输入引脚，这个很多人都会忽视因为不理解开关电路的开和关的状态的回路是什么样的。有这颗电容，那个大容量的一颗或者几颗摆到芯片的一公分之外都可以。输出没有这么高的要求，想好看有两三毫米的距离没问题。另外就是mlcc电容的电压衰减是很严重的问题，比如22uF的0402，在1V左右的CPU核心电压下他的容量是真的有22uF的，但是到了3.3V就不到10uF了，所以3.3V以上的高电压一定要用大封装的，最好用钽电容。较大功率的电源一定要按照原厂给的layout布板，电感的体积如果参考设计用的是村田太诱TDK，换成国产的一定要再大一号，我和做过的design house在一半的项目里因为电感问题多做了一板。因为电感比较贵大家能省则省但我的经验是批量不大的东西不要试图在电源上省一分钱，电源故障导致的开发延误、软件工程师疲于奔命（例如WiFi跑不稳）时间人力损失都是十万元起步。

4 过孔不是很大的问题，不要因为要多打过孔而割裂平面，低速信号打十几个孔都还是OK的。你看到ti的大量的板子不管四层还是双面，都会有两层，一层的线几乎全是横着走的，另一层几乎全是纵着走的，就是这个道理。这两层走线层的地尽可能包住所有走线然后上下打孔连通。形成一个隔离网。这个网一般而言都是好的，除非对射频谐波要求很高，那种情况下可能要把数字线周围的网去掉，让地的形状尽可能是大面积完整金属。

5 其他的要求对现在的芯片来说都不是大问题，但原理工程师脑子要清爽一点，比如damping电阻该放在驱动侧还是接受侧这种问题，号称有十年经验的大厂工程师也有摆错的，还嘴硬，示波器一上看到overshoot了才知道错了；以及晶振电容不会算的，是乘以二还是除以二搞不清楚。

6 射频。射频和喇叭是两个「看不见的体积」。拇指定律是：1/4波长平方的面积是需要的。比这个小的话带宽都会很敏感，地的面积也会很敏感。如果你要抄厂商原版设计，你要理解参考设计有两类，一类是板子巨大射频摆在一个边角的，你抄这个也得板子巨大；另一类是板子有个几公分见方的面积，你抄这个也得和它长宽基本差不多才行；一般而言陶瓷天线厂商会给一个测试报告，在那个报告里测试板会有一个尺寸，你的板子尺寸跟那个差不多就可以。在这个问题上，ti的板子可以抄，其它的社区板几乎全体废柴没有能抄的，包括π和很多96板都是在射频上胡搞的。2.4G射频ti有个7mm的倒F在3.2公分宽度以上的PCB表现很好，其它的倒F就要选高的不要选折线的（meander带宽不行），带宽是射频的绳命，它让天线能适应各种版型，外壳，和摆放时周围的材质。图省事就用rf cable拉出来上pcb或fpc天线，但性能也就是马马虎虎，again，即使这样使用天线，模块也尽量摆在板边，不要让它夹在电源和其它负载之间。最后我再推广一下dipole天线，虽然体积很大，但真的带宽牛逼而且对地不敏感。